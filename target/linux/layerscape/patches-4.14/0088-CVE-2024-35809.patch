--- a/drivers/pci/pci-driver.c
+++ b/drivers/pci/pci-driver.c
@@ -443,6 +443,13 @@ static int pci_device_remove(struct devi
 	if (drv) {
 		if (drv->remove) {
 			pm_runtime_get_sync(dev);
+			/*
+			 * If the driver provides a .runtime_idle() callback and it has
+			 * started to run already, it may continue to run in parallel
+			 * with the code below, so wait until all of the runtime PM
+			 * activity has completed.
+			 */
+			pm_runtime_barrier(dev);
 			drv->remove(pci_dev);
 			pm_runtime_put_noidle(dev);
 		}
