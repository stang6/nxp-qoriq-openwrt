--- a/fs/ext4/extents.c
+++ b/fs/ext4/extents.c
@@ -2109,6 +2109,7 @@ prepend:
 				       ppath, newext);
 	if (err)
 		goto cleanup;
+	path = *ppath;
 	depth = ext_depth(inode);
 	eh = path[depth].p_hdr;
 
